{
  "version": 3,
  "sources": ["../../@nylas/nylas-react/lib/nylas-provider.js", "../../@nylas/nylas-react/lib/nylas-context.js", "../../@nylas/nylas-js/lib/request.js", "../../@nylas/nylas-js/lib/index.js"],
  "sourcesContent": ["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useEffect, useState } from \"react\";\nimport NylasContext from \"./nylas-context\";\nimport Nylas from \"@nylas/nylas-js\";\nconst NylasProvider = (props) => {\n    const { children } = props, nylasProps = __rest(props, [\"children\"]);\n    const [client, setClient] = useState(new Nylas(nylasProps));\n    const safeSetState = (state) => {\n        if (client) {\n            console.warn(\"Client already exists.\");\n            return;\n        }\n        setClient(state);\n    };\n    useEffect(() => {\n        if (!nylasProps || !nylasProps.serverBaseUrl) {\n            return;\n        }\n        safeSetState(new Nylas(nylasProps));\n    }, [nylasProps]);\n    return (React.createElement(NylasContext.Provider, { value: client }, children));\n};\nexport default NylasProvider;\n", "import * as React from 'react';\nconst NylasContext = React.createContext(null);\nexport const useNylas = () => React.useContext(NylasContext);\nexport default NylasContext;\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport default class Request {\n    /**\n     * Make a GET request\n     * @param url The URL to make the GET call to\n     * @param headers Additional headers to set for the call\n     * @return The raw response object\n     * @throws If the HTTP response code is non 2xx\n     */\n    static get({ url, headers }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield fetch(url, {\n                method: 'GET',\n                headers: Object.assign(Object.assign({}, headers), { Accept: 'application/json' }),\n            }).then(this._handleErrorResponse);\n        });\n    }\n    /**\n     * Make a POST request\n     * @param url The URL to make the POST call to\n     * @param body The JSON body to send\n     * @param headers Additional headers to set for the call\n     * @return The raw response object\n     * @throws If the HTTP response code is non 2xx\n     */\n    static post({ url, body, headers }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield fetch(url, {\n                method: 'POST',\n                headers: Object.assign(Object.assign({}, headers), { 'Content-Type': 'application/json' }),\n                body: JSON.stringify(body),\n            }).then(this._handleErrorResponse);\n        });\n    }\n    /**\n     * Checks if the response HTTP code is an error code, and if so, throws an error\n     * @param response The raw response object\n     * @throws If the HTTP response code is non 2xx\n     * @private\n     */\n    static _handleErrorResponse(response) {\n        if (response.status > 299) {\n            response.text().then((text) => {\n                return new Error(`Error encountered during request. Status: ${response.status}. Message: ${text}`);\n            });\n        }\n        return response;\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Request from './request';\nvar DefaultEndpoints;\n(function (DefaultEndpoints) {\n    DefaultEndpoints[\"buildAuthUrl\"] = \"/nylas/generate-auth-url\";\n    DefaultEndpoints[\"exchangeCodeForToken\"] = \"/nylas/exchange-mailbox-token\";\n})(DefaultEndpoints || (DefaultEndpoints = {}));\nexport default class Nylas {\n    constructor(props) {\n        /**\n         * Builds the URL for authenticating users to your application via Hosted Authentication\n         * @param opts Configuration for building the URL\n         * @return URL for authentication\n         * @throws If the HTTP response code is non 2xx\n         * @throws If the server doesn't respond with a URL\n         */\n        this.buildAuthUrl = (opts) => __awaiter(this, void 0, void 0, function* () {\n            const url = this.serverBaseUrl +\n                (opts.buildAuthUrlEndpoint || DefaultEndpoints.buildAuthUrl);\n            const rawResp = yield Request.post({\n                url,\n                body: {\n                    email_address: opts.emailAddress,\n                    success_url: opts.successRedirectUrl,\n                },\n            });\n            const authUrl = yield rawResp.text();\n            if (!authUrl || authUrl.length == 0) {\n                throw new Error('No auth URL was returned from the server.');\n            }\n            return authUrl;\n        });\n        /**\n         * Builds and redirects to the URL for authenticating users to your application via Hosted Authentication\n         * @param opts Configuration for building the URL\n         * @throws If window is not defined\n         * @throws If the HTTP response code is non 2xx\n         * @throws If the server doesn't respond with a URL\n         */\n        this.authWithRedirect = (opts) => __awaiter(this, void 0, void 0, function* () {\n            browserCheck();\n            window.location.href = yield this.buildAuthUrl(opts);\n        });\n        /**\n         * Exchange the Nylas authorization code for a Nylas access token\n         * @param authorizationCode Nylas authorization code\n         * @param opts Configuration for the token exchange\n         * @throws If no authorization code was provided\n         * @throws If the HTTP response code is non 2xx\n         * @throws If the server doesn't respond with an access token\n         */\n        this.exchangeCodeForToken = (authorizationCode, opts) => __awaiter(this, void 0, void 0, function* () {\n            if (!authorizationCode) {\n                throw new Error('No valid authorization code detected');\n            }\n            const url = this.serverBaseUrl +\n                ((opts === null || opts === void 0 ? void 0 : opts.exchangeCodeForTokenEndpoint) ||\n                    DefaultEndpoints.exchangeCodeForToken);\n            const rawResp = yield Request.post({\n                url,\n                body: {\n                    token: authorizationCode,\n                },\n            });\n            const accessToken = yield rawResp.text();\n            if (!accessToken || accessToken.length == 0) {\n                throw new Error('No access token was returned from the server.');\n            }\n            return accessToken;\n        });\n        /**\n         * Parses the URL for the Nylas authorization code for a Nylas access token\n         * @param opts Configuration for the token exchange\n         * @throws If window is not defined\n         * @throws If no authorization code was provided\n         * @throws If the HTTP response code is non 2xx\n         * @throws If the server doesn't respond with an access token\n         */\n        this.exchangeCodeFromUrlForToken = (opts) => __awaiter(this, void 0, void 0, function* () {\n            browserCheck();\n            const authorizationCode = new URLSearchParams(window.location.search).get('code');\n            return yield this.exchangeCodeForToken(authorizationCode, opts);\n        });\n        this.serverBaseUrl = props.serverBaseUrl;\n    }\n}\n/**\n * Simple browser check\n * @throws If window is not defined\n */\nconst browserCheck = () => {\n    if (typeof window === 'undefined') {\n        throw new Error('You are trying to use a browser function without a browser.');\n    }\n};\n"],
  "mappings": "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",
  "names": ["__awaiter", "DefaultEndpoints", "React"]
}
